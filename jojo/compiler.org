#+property: tangle compiler.py
#+title: compiler

* [note]

  - a compiler, in python
    to compile jojo to python

* [todo-stack]

  - re-expose built in functions

  - rewrite the compiler, in jojo

* import

  #+begin_src python
  from vm import (
      VM, RP,
      GET, SET,
      JOJO, MSG, CLO,
      APPLY, IFTE,
      NEW,
  )
  #+end_src

* stack operation

  #+begin_src python
  def drop(a):
      return ()

  def dup(a):
      return (a, a)

  def over(a, b):
      return (a, b, a)

  def tuck(a, b):
      return (b, a, b)

  def swap(a, b):
      return (b, a)
  #+end_src

* number

  #+begin_src python
  def add(a, b):
      return a + b
  #+end_src
