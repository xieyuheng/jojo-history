#+property: tangle compiler.py
#+title: compiler

* [note]

  - a compiler, in python
    to compile jojo to python

  - input  : jojo sexp list
    output : string list ><><><

    ??? code block list ><><><

* import

  #+begin_src python
  from vm import (
      VM, RP,
      GET, SET,
      JOJO, MSG, CLO,
      APPLY, IFTE,
      NEW,
  )

  from sexp import (
      null, null_p,
      cons, cons_p,
      list_p,
      car, cdr,
  )
  #+end_src

* [note] syntax

  - top level :
    - (+jojo)
    - (+macro)
    - (+data) ><><><

  - in jojo :
    - (begin)
    - (clo)

    - (quote)
    - (partquote)
    - (@)

    - (if) ><><><
    - (cond) ><><><
    - (case) ><><><

  - key jo :
    - apply
    - ifte
    - new

  - jo pattern :
    - :local
    - :local!
    - .message

* macro_expend

* stack operation

  #+begin_src python
  def drop(a):
      return ()

  def dup(a):
      return (a, a)

  def over(a, b):
      return (a, b, a)

  def tuck(a, b):
      return (b, a, b)

  def swap(a, b):
      return (b, a)
  #+end_src

* number

  #+begin_src python
  def add(a, b):
      return a + b
  #+end_src
